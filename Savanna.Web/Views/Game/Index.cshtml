@model GameViewModel

@{
    ViewBag.Title = "Play";
}
<h1>Game Field</h1>

<pre>@Model.GameState</pre>

<pre id="gameField">@Model.GameState</pre>

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.js"></script>
<script>
    var connection = new signalR.HubConnectionBuilder().withUrl("/gameHub").build();

    connection.on("Display", function (message) {
        // Display the message in your game area. This will depend on your HTML structure.
        const gameField = document.getElementById("gameField");
        gameField.textContent = message;
    });

    connection.start()
        .then(() => console.log('Connection started'))
        .catch(err => console.error('Error while starting connection: ' + err));

    connection.on("Display", function (message) {
        console.log('Received message: ' + message);
        const gameField = document.getElementById("gameField");
        gameField.textContent = message;
    });

    document.addEventListener("keydown", function (event) {
        connection.invoke("SendKeyPress", event.key).catch(function (err) {
            return console.error(err.toString());
        });
    });
</script>